<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ÂãïÁâ©Êó©Êäº„Åó„Ç≤„Éº„É†</title>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f0f0;
    }
    #game-container {
      max-width: 600px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    #question {
      font-size: 2em;
      margin: 20px 0;
    }
    #buttons button {
      font-size: 2em;
      margin: 5px;
      padding: 10px 20px;
      cursor: pointer;
    }
    #controls button {
      font-size: 1.2em;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>ÂãïÁâ©Êó©Êäº„Åó„Ç≤„Éº„É†</h1>
    <div id="timer">Time: 0.00 s</div>
    <div id="score">Score: 0</div>
    <div id="question"></div>
    <div id="buttons"></div>
    <!-- ÂãïÁâ©„Éú„Çø„É≥„Åã„ÇâÊîπË°å4„Å§ÂàÜ‰∏ã„Å´ÈÖçÁΩÆ -->
    <div id="controls">
      <br><br><br><br>
      <button id="start-btn">„Çπ„Çø„Éº„Éà</button>
      <button id="restart-btn" disabled>„É™„Çπ„Çø„Éº„Éà</button>
    </div>
  </div>

  <script>
    // ÂãïÁâ©„ÅÆË™≠„Åø‰ªÆÂêç„ÅÆÂÄôË£ú
    const animalReadings = [
      "„ÅÑ„Å¨", "Áä¨", 
      "„Å≠„Åì", "„Éç„Ç≥", "Áå´", 
      "„ÅÜ„Åï„Åé", "„Ç¶„Çµ„ÇÆ", "ÂÖé", 
      "„Çæ„Ç¶", 
      "„É©„Ç§„Ç™„É≥", "ÁçÖÂ≠ê", 
      "„Åç„Å§„Å≠", 
      "„Ç≠„É™„É≥", 
      "„Åó„Åæ„ÅÜ„Åæ", 
      "„Çµ„É´"
    ];
    
    // ÂêÑË™≠„Åø‰ªÆÂêç„Åå„Å©„ÅÆÂãïÁâ©„Åã„ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞
    const readingToAnimal = {
      "„ÅÑ„Å¨": "dog",
      "Áä¨": "dog",
      "„Å≠„Åì": "cat",
      "„Éç„Ç≥": "cat",
      "Áå´": "cat",
      "„ÅÜ„Åï„Åé": "rabbit",
      "„Ç¶„Çµ„ÇÆ": "rabbit",
      "ÂÖé": "rabbit",
      "„Çæ„Ç¶": "elephant",
      "„É©„Ç§„Ç™„É≥": "lion",
      "ÁçÖÂ≠ê": "lion",
      "„Åç„Å§„Å≠": "fox",
      "„Ç≠„É™„É≥": "giraffe",
      "„Åó„Åæ„ÅÜ„Åæ": "zebra",
      "„Çµ„É´": "monkey"
    };

    // Ê≠£Ëß£„Å®„Åô„Çã„Ç¢„Ç§„Ç≥„É≥Ôºà‚Äª„Äå„Ç≠„É™„É≥„Äç„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„Åì„Åì„Åß„ÅØ‰ª£Áî®„Å®„Åó„Å¶üêº„Çí‰ΩøÁî®Ôºâ
    const animalMapping = {
      dog: "üêï",
      cat: "üêà",
      rabbit: "üêá",
      elephant: "üêò",
      lion: "ü¶Å",
      fox: "ü¶ä",
      giraffe: "üêº",
      zebra: "ü¶ì",
      monkey: "üêí"
    };

    // ‰ΩøÁî®„Åô„ÇãÂÖ®10Á®Æ„ÅÆ„Ç¢„Ç§„Ç≥„É≥ÔºàÊ≠£Ëß£„Å´Âá∫„Çã„ÇÇ„ÅÆ‰ª•Â§ñ„ÅÆ„Éá„Ç≥„Ç§„ÇÇÂê´„ÇÄÔºâ
    const icons = ["üêï", "üêà", "üêá", "üêò", "ü¶Å", "ü¶ä", "ü¶ì", "üêí", "üêº", "üê∑"];

    let currentRound = 0;
    let score = 0;
    let startTime = null;
    let timerInterval = null;

    // „Çø„Ç§„Éû„ÉºË°®Á§∫„ÅÆÊõ¥Êñ∞
    function updateTimer() {
      const now = new Date();
      const elapsed = (now - startTime) / 1000;
      document.getElementById("timer").innerText = "Time: " + elapsed.toFixed(2) + " s";
    }

    // ÈÖçÂàó„Ç∑„É£„ÉÉ„Éï„É´ÔºàFisher‚ÄìYates„Ç¢„É´„Ç¥„É™„Ç∫„É†Ôºâ
    function shuffleArray(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // Ê¨°„ÅÆÂïèÈ°å„Å∏ÈÄ≤„ÇÄ
    function nextQuestion() {
      if (currentRound >= 10) {
        endGame();
        return;
      }
      currentRound++;
      // „É©„É≥„ÉÄ„É†„Å™Ë™≠„Åø‰ªÆÂêç„ÇíÈÅ∏Êäû
      const randomIndex = Math.floor(Math.random() * animalReadings.length);
      const reading = animalReadings[randomIndex];
      document.getElementById("question").innerText = reading;

      // Ê≠£Ëß£„Ç¢„Ç§„Ç≥„É≥„ÅÆÊ±∫ÂÆö
      const animalKey = readingToAnimal[reading];
      const correctIcon = animalMapping[animalKey];

      // Ê≠£Ëß£„Ç¢„Ç§„Ç≥„É≥‰ª•Â§ñ„Åã„Çâ„É©„É≥„ÉÄ„É†„Å´4„Å§„ÅÆ„Éá„Ç≥„Ç§„ÇíÈÅ∏Êäû
      let decoyIcons = icons.filter(icon => icon !== correctIcon);
      decoyIcons = shuffleArray(decoyIcons).slice(0, 4);
      // Ê≠£Ëß£„Å®„Éá„Ç≥„Ç§„ÇíÂêà‰Ωì„Åó„Å¶„Ç∑„É£„ÉÉ„Éï„É´
      let options = shuffleArray(decoyIcons.concat([correctIcon]));

      // „Éú„Çø„É≥Áæ§„ÅÆÊèèÁîª
      const buttonsDiv = document.getElementById("buttons");
      buttonsDiv.innerHTML = "";
      options.forEach(icon => {
        const button = document.createElement("button");
        button.innerText = icon;
        button.addEventListener("click", function() {
          if (icon === correctIcon) {
            score += 10;
          } else {
            score -= 5;
          }
          document.getElementById("score").innerText = "Score: " + score;
          nextQuestion();
        });
        buttonsDiv.appendChild(button);
      });
    }

    // „Ç≤„Éº„É†ÈñãÂßã
    function startGame() {
      currentRound = 0;
      score = 0;
      document.getElementById("score").innerText = "Score: " + score;
      startTime = new Date();
      document.getElementById("timer").innerText = "Time: 0.00 s";
      timerInterval = setInterval(updateTimer, 10);
      document.getElementById("start-btn").disabled = true;
      document.getElementById("restart-btn").disabled = true;
      nextQuestion();
    }

    // „Ç≤„Éº„É†ÁµÇ‰∫ÜÂá¶ÁêÜ
    function endGame() {
      clearInterval(timerInterval);
      document.getElementById("question").innerText = "„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: " + score;
      document.getElementById("buttons").innerHTML = "";
      document.getElementById("restart-btn").disabled = false;
    }

    // „Ç≤„Éº„É†„É™„Çª„ÉÉ„Éà
    function restartGame() {
      document.getElementById("start-btn").disabled = false;
      document.getElementById("timer").innerText = "Time: 0.00 s";
      document.getElementById("score").innerText = "Score: 0";
      document.getElementById("question").innerText = "";
    }

    // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆÁôªÈå≤
    document.getElementById("start-btn").addEventListener("click", startGame);
    document.getElementById("restart-btn").addEventListener("click", restartGame);
  </script>
</body>
</html>